@startuml


package "Client Tier" {
  component [ReactApp] as ReactApp
  ReactApp -() UIInterface : provides
  ReactApp --( APIClient : requires
}

package "Web Tier" {
  component [ExpressServer] as ExpressServer
  component [SecurityMiddleware] as SecurityMiddleware
  component [JWTAuth] as JWTAuth
  
  ExpressServer -() HTTPInterface : provides
  ExpressServer --( DatabaseInterface : requires
  ExpressServer --( ExternalAPIInterface : requires
  
  SecurityMiddleware -() RequestFilter : provides
  SecurityMiddleware --( AuthenticatedRequest : requires
  
  JWTAuth -() AuthInterface : provides
  JWTAuth --( TokenInterface : requires
}

package "Business Tier" {
  component [UserService] as UserService
  component [AppointmentService] as AppointmentService
  component [HealthcareService] as HealthcareService
  component [BillingService] as BillingService
  
  UserService -() UserInterface : provides
  UserService --( UserDataInterface : requires
  
  AppointmentService -() BookingInterface : provides
  AppointmentService --( AppointmentDataInterface : requires
  
  HealthcareService -() HealthInterface : provides
  HealthcareService --( HealthDataInterface : requires
  
  BillingService -() PaymentInterface : provides
  BillingService --( BillingDataInterface : requires
}

package "Data Tier" {
  component [MongoDBAdapter] as MongoDBAdapter
  component [FileManager] as FileManager
  
  MongoDBAdapter -() DataInterface : provides
  MongoDBAdapter --( DatabaseConnection : requires
  
  FileManager -() FileInterface : provides
  FileManager --( CloudinaryAPI : requires
}

package "External Services" {
  component [GoogleServices] as GoogleServices
  component [CloudinaryService] as CloudinaryService
  component [PayOSGateway] as PayOSGateway
  
  GoogleServices -() GoogleInterface : provides
  CloudinaryService -() CloudinaryInterface : provides
  PayOSGateway -() PayOSInterface : provides
}

' Interface to Interface connections (UML standard)
APIClient ..> HTTPInterface
RequestFilter ..> AuthInterface
AuthenticatedRequest ..> UserInterface
UserInterface ..> UserDataInterface
BookingInterface ..> AppointmentDataInterface
HealthInterface ..> HealthDataInterface
PaymentInterface ..> BillingDataInterface

UserDataInterface ..> DataInterface
AppointmentDataInterface ..> DataInterface
HealthDataInterface ..> DataInterface
BillingDataInterface ..> DataInterface

FileInterface ..> CloudinaryAPI
CloudinaryAPI ..> CloudinaryInterface
ExternalAPIInterface ..> GoogleInterface
PaymentInterface ..> PayOSInterface

@enduml